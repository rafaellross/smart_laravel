!function(t){var e={};function a(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=e,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/",a(a.s=37)}({37:function(t,e,a){t.exports=a(38)},38:function(t,e){$(window).on("hashchange",function(t){$("#modalLoading").modal("show")}),$(document).ready(function(){function t(t){var e=t.split(":");return e.length>1?60*e[0]+ +e[1]:0}function e(t){function e(t){return(t<10?"0":"")+t}return e(t/60|0)+":"+e(t%60)}$("form").submit(function(){$("#modalLoading").modal("show")}),$("#flash-message").fadeOut(5e3),$(".date-picker").datepicker({format:"dd/mm/yyyy"}),showExtra=function(t,e){$(e).css("display","block"),$(t).fadeOut()},$(".hour-start").change(function(){var t=$(this).attr("id").split("_"),a=t[2],i=$("#"+t[0]+"_end_"+a);i.prop("disabled",!1).empty();i.append('<option value="">-</option>');for(var n=$(this).val(),o=Number(n)+15;o<=1425;o+=15){var l='<option value="'+o+'">'+e(o)+"</option>";$(i).append(l)}}),$(".hour-end").change(function(){var a=$(this).attr("id").split("_"),i=Number(a[2]),n=i+1,o=$("#"+a[0]+"_start_"+n);if(o.length>0){o.prop("disabled",!1).empty(),$("#"+a[0]+"_hours_"+n).val(""),$("#"+a[0]+"_end_"+n).val("");o.append('<option value="">-</option>');for(var l=$(this).val(),c=Number(l);c<=1425;c+=15){var r='<option value="'+c+'">'+e(c)+"</option>";o.append(r)}}var s=$("#"+a[0]+"_hours_"+i),d=Number($("#"+a[0]+"_start_"+i).val()),h=Number($(this).val()),u=1===i&&"sat"!==a[0]?15:0;s.val(h-d-u>0?e(h-d-u):"");var p=$("#"+a[0]+"_hours_1").val(),m=$("#"+a[0]+"_hours_2").val(),v=$("#"+a[0]+"_hours_3").val(),f=$("#"+a[0]+"_hours_4").val();p=t(p),m=t(m),v=t(v),f=t(f),$("#"+a[0]+"_15").val(""),$("#"+a[0]+"_20").val("");var _=p+m+v+f;$("#"+a[0]+"_total").val(e(_));var g,b=0,y=0,w=$("#job"+a[0].charAt(0).toUpperCase()+a[0].slice(1)+i).val();_>480&&"sat"!==a[0]&&(b=Math.min(120,_-480)),(_>600||"sat"==a[0])&&("sat"==a[0]?y=_:"pld"!==w&&(y=_-480-120)),g=_-b-y,$("#"+a[0]+"_15").val(e(b)),$("#"+a[0]+"_20").val(e(y)),$("#"+a[0]+"_nor").val(e(g)),calcTotal()}),calcTotal=function(){var a=0;$(".horNormal").each(function(){a+=t($(this).val())}),$("#totalNormal").val(e(a));var i=0;$(".hours-total").each(function(){i+=t($(this).val())}),$("#totalWeek").val(e(i));var n=0;$(".hor15").each(function(){n+=t($(this).val())}),$("#total15").val(e(n));var o=0;$(".hor20").each(function(){o+=t($(this).val())}),$("#total20").val(e(o))},$("#btnPreFill").click(function(){$("input, select").not("#preStart, #preEnd, #output, #empDate, #preJob, #PreNormal, #Pre15, #Pre20, #preHours, #btnClearSign, #status, #output, #week_end, #empname, select[name=pld], select[name=rdo], select[name=anl], input[name=employee_id], .btnClear, input[type=hidden], .btn").val("");var t=$("#preEnd").val();$(".end-1").not("#sat_end_1").val(t);var e=$("#preStart").val();$(".start-1").not("#sat_start_1").val(e);var a=$("#preJob").val();$(".job-1").not("#sat_job_1").val(a),$(".end-1").not("#sat_end_1").trigger("change")}),$(".job").change(function(){"sick"==$(this).val()&&alert("You have to attach a medical certificate at the end of this Time Sheet or this day won't be paid!")}),$(".btnClear").click(function(){$("."+this.id).val(""),$("."+this.id).trigger("change")});$(document).on("change","input[type=file]",function(){!function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:600,a=$(t).prop("name"),i=$("[id*='"+a+"_img']"),n=$("[id*='"+a+"_hidden']");if(t.files&&t.files[0]){var o=new FileReader;o.onload=function(t){var a=new Image;a.onload=function(){var t=document.createElement("canvas"),o=t.getContext("2d");for(t.width=a.width,t.height=a.height,o.drawImage(a,0,0);.5*t.width>e;)t.width*=.5,t.height*=.5,o.drawImage(t,0,0,t.width,t.height);t.width=e,t.height=t.width*a.height/a.width,o.drawImage(a,0,0,t.width,t.height),i.attr("src",t.toDataURL()).show(),n.val(t.toDataURL())},a.src=t.target.result},o.readAsDataURL(t.files[0])}}(this)}),$(document).on("click",".delCert",function(){var t=$(this).prop("id").split("-");if("medical_certificates[1]"==t[0]){var e=$("[id*='"+t[0]+"_img']"),i=$("[name*='"+t[0]+"']"),n=$("[id*='"+t[0]+"_hidden']");e.attr("src","").hide(),n.val(""),i.val("")}else a--,$("[id*='"+t[0]+"_row']").remove()});var a=1;$("#addCert").click(function(){var t='\n        <div class="alert alert-secondary" id="medical_certificates['+ ++a+']_row">                          \n            <h5 style="text-align: center;">Certificate '+a+'</h5>          \n            <div class="input-group col-12 mb-3">\n              <div class="custom-file" id="medical_certificates_list">\n                <input type="file" class="custom-file-input medical_certificates" id="medical_certificates['+a+']" name="medical_certificates['+a+']"/>                        \n                <label class="custom-file-label" for="medical_certificates['+a+']">Choose files</label>\n              </div>\n            </div>\n            <div class="input-group col-12 mb-3">\n                <img id="medical_certificates['+a+']_img" class="img-fluid" style="">\n            </div>   \n            <input id="medical_certificates['+a+']-delete" type="button" class="btn btn-danger btn-sm ml-2 delCert" value="Delete">\n            <input type="hidden" class="custom-file-input" id="medical_certificates['+a+']_hidden" name="medical_certificates['+a+']_hidden" value="">                        \n        </div>';$("#aditional_certificates").append(t)}),$("#timesheet_form").submit(function(t){var e=[1,2,3,4];$.each([{description:"Monday",short:"mon"},{description:"Tuesday",short:"tue"},{description:"Wednesday",short:"wed"},{description:"Thursday",short:"thu"},{description:"Friday",short:"fri"},{description:"Saturday",short:"sat"}],function(a,i){$.each(e,function(e,a){var n=$("#"+i.short+"_start_"+a).val(),o=$("#"+i.short+"_end_"+a).val(),l=$("#"+i.short+"_job_"+a).val(),c=$("#"+i.short+"_hours_"+a).val();return""!==c&&(""===n&&""===o||""===l)||""!==n&&(""===o||""===l||""===c)||""!==o&&(""===n||""===l||""===c)?(t.preventDefault(),alert("Select start, end time and job "+a+" for "+i.description),$("#"+i.short+"_job_"+a).focus(),!1):l.length>0&&(0===n.length||0===o.length||"0"===n&&"0"===o)?(t.preventDefault(),alert("Select start, end time and job "+a+" for "+i.description),$("#"+i.short+"_job_"+a).focus(),!1):void 0})}),$("#modalLoading").modal("hide")}),$("#chkRow").click(function(){var t=$("input[type=checkbox]").not(this);t.prop("checked",!t.prop("checked"))}),$("#btnPrint").click(function(){if($("input[type=checkbox]:checked").not("#chkRow").length>0){var t=Array();$("input[type=checkbox]:checked").not("#chkRow").each(function(){t.push(this.id.split("-")[1])}),window.open("timesheets/action/"+t.join(",")+"/print","_blank")}}),$("#btnDelete").click(function(){if($("input[type=checkbox]:checked").not("#chkRow").length>0){$("#modalLoading").modal("show");var t=window.location.pathname+"/action/",e=Array();$("input[type=checkbox]:checked").not("#chkRow").each(function(){e.push(this.id.split("-")[1])}),1==confirm("Are you sure you want to delete following documents: "+e+"?")&&$(location).attr("href",t+e.join(",")+"/delete")}}),$(".delete").click(function(){1==confirm("Are you sure you want to delete this document (#"+$(this).attr("id")+")?")&&$(location).attr("href",window.location.pathname+"/action/"+$(this).attr("id")+"/delete")}),$("#btnStatus").click(function(){$("input[type=checkbox]:checked").not("#chkRow").length>0&&$("#modalChangeStatus").modal("show")}),$("#btnSaveStatus").click(function(){if($("input[type=checkbox]:checked").not("#chkRow").length>0){var t=Array();$("input[type=checkbox]:checked").not("#chkRow").each(function(){t.push(this.id.split("-")[1])});var e=$("select[name=changeStatus]").val();$(location).attr("href","/timesheets/action/"+t.join(",")+"/update/"+e)}}),$("#btnSearch").click(function(){$("#modalLoading").modal("show"),$("#employee").empty();var t=$("#search").val(),e=window.location.pathname.replace("timesheets/select","");$.ajax({url:e+"api/employees/"+t,type:"GET",dataType:"json"}).done(function(t){$("#modalLoading").modal("hide"),$.each(t,function(t,e){var a='\n\n                      <div class="active select-employee card '+(null===e.last_timesheet||void 0===e.last_timesheet.id?"":"bg-warning")+'">\n                        <div class="select-employee card-header" role="tab" id="heading-undefined">\n                          <h6 class="mb-0">\n                            <div>\n                              <a href="create/'+e.id+' " style="'+(null===e.last_timesheet||void 0===e.last_timesheet.id?"":"color: white;")+'">\n                                <span> '+e.name+'</span>\n                                </a>\n                              <div class="float-right" style="'+(null===e.last_timesheet||void 0===e.last_timesheet.id?"display: none":"display: block;")+'">\n                               <i style="margin-right: 20px;">This employee already have a Time Sheet for this week   &#32;</i>\n                              <a href="action/'+(null===e.last_timesheet||void 0===e.last_timesheet.id?"":e.last_timesheet.id)+'/print" class="btnAdd btn btn-primary float-right" style="color: white;display:'+(null===e.last_timesheet||void 0===e.last_timesheet.id?"none":"block")+';" target="_blank">View</a>\n                              </div>                                \n                            </div>\n                          </h6>\n                        </div>\n                        </div>';$("#employee").append(a)})}).fail(function(){console.log("error")})})})}});